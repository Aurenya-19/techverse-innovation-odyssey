<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TechVerse 2077</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  font-family: Arial, sans-serif; 
  background: linear-gradient(135deg, #0a0a0a, #1a0a2e); 
  color: #0ff; 
  overflow: hidden;
}

#startScreen { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100vw; 
  height: 100vh; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  justify-content: center; 
  z-index: 10000; 
}

h1 { 
  font-size: 4em; 
  color: #0ff; 
  text-shadow: 0 0 30px #0ff; 
  margin-bottom: 30px; 
}

.subtitle { 
  font-size: 1.2em; 
  color: #f0f; 
  margin-bottom: 40px; 
  text-align: center; 
  max-width: 80%;
}

.charGrid { 
  display: grid; 
  grid-template-columns: repeat(2, 250px); 
  gap: 20px; 
  margin-bottom: 40px; 
}

.charCard { 
  background: rgba(0, 255, 255, 0.1); 
  border: 3px solid #0ff; 
  border-radius: 15px; 
  padding: 30px; 
  cursor: pointer; 
  text-align: center; 
  transition: all 0.3s;
}

.charCard:hover { 
  transform: scale(1.05); 
  box-shadow: 0 0 30px #0ff; 
}

.charCard.selected { 
  background: rgba(255, 0, 255, 0.3); 
  border-color: #f0f; 
  box-shadow: 0 0 40px #f0f; 
}

.charCard .icon { 
  font-size: 3em; 
  margin-bottom: 15px; 
}

.charCard h3 { 
  color: #0ff; 
  font-size: 1.3em; 
  margin-bottom: 10px; 
}

.charCard p { 
  color: #f0f; 
  font-size: 0.9em; 
}

#startBtn { 
  padding: 20px 80px; 
  font-size: 1.5em; 
  background: linear-gradient(135deg, #0ff, #f0f); 
  border: none; 
  border-radius: 10px; 
  color: #000; 
  font-weight: bold; 
  cursor: pointer; 
  box-shadow: 0 0 30px #0ff;
  transition: all 0.3s;
}

#startBtn:hover { 
  transform: scale(1.1); 
  box-shadow: 0 0 50px #f0f; 
}

#gameCanvas { 
  display: none; 
  width: 100vw; 
  height: 100vh; 
}

#info { 
  position: fixed; 
  top: 20px; 
  left: 20px; 
  background: rgba(0, 0, 0, 0.8); 
  padding: 20px; 
  border: 2px solid #0ff; 
  border-radius: 10px; 
  display: none;
}

#info h3 { 
  color: #0ff; 
  margin-bottom: 10px; 
}

#info p { 
  color: #f0f; 
  margin: 5px 0; 
}

.hide { display: none !important; }
</style>
</head>
<body>

<div id="startScreen">
  <h1>‚ö° TECHVERSE 2077 ‚ö°</h1>
  <p class="subtitle">Underground Tech Labs + Startup Hub + Cyberpunk Future</p>
  
  <div class="charGrid">
    <div class="charCard" data-char="Bio-Hacker">
      <div class="icon">üß¨</div>
      <h3>Bio-Hacker</h3>
      <p>Synthetic life expert</p>
    </div>
    
    <div class="charCard" data-char="Quantum Rebel">
      <div class="icon">‚öõÔ∏è</div>
      <h3>Quantum Rebel</h3>
      <p>Underground physicist</p>
    </div>
    
    <div class="charCard" data-char="Neuro-Engineer">
      <div class="icon">üß†</div>
      <h3>Neuro-Engineer</h3>
      <p>Brain-tech specialist</p>
    </div>
    
    <div class="charCard" data-char="Startup Founder">
      <div class="icon">üöÄ</div>
      <h3>Startup Founder</h3>
      <p>Tech entrepreneur</p>
    </div>
  </div>
  
  <button id="startBtn">JACK IN</button>
</div>

<canvas id="gameCanvas"></canvas>

<div id="info">
  <h3>‚ö° STATUS</h3>
  <p>Role: <span id="role">-</span></p>
  <p>Level: <span id="level">1</span></p>
  <p>XP: <span id="xp">0</span></p>
  <p>Labs Visited: <span id="labs">0/11</span></p>
  <br>
  <p style="color: #0ff;">WASD - Move | Mouse - Look | E - Interact</p>
</div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
import { PointerLockControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/PointerLockControls.js';

let selectedChar = null;
let scene, camera, renderer, controls;
let gameStarted = false;

// Character selection
document.querySelectorAll('.charCard').forEach(card => {
  card.addEventListener('click', () => {
    document.querySelectorAll('.charCard').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    selectedChar = card.dataset.char;
    console.log('Selected:', selectedChar);
  });
});

// Start button
document.getElementById('startBtn').addEventListener('click', () => {
  if (!selectedChar) {
    alert('Please select a character first!');
    return;
  }
  
  console.log('Starting game with:', selectedChar);
  document.getElementById('role').textContent = selectedChar;
  document.getElementById('startScreen').classList.add('hide');
  document.getElementById('gameCanvas').style.display = 'block';
  document.getElementById('info').style.display = 'block';
  
  initGame();
});

function initGame() {
  console.log('Initializing game...');
  
  const canvas = document.getElementById('gameCanvas');
  
  // Scene
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x0a0a1a);
  scene.fog = new THREE.FogExp2(0x0a0a1a, 0.002);
  
  // Camera
  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(0, 1.7, 50);
  
  // Renderer
  renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.shadowMap.enabled = true;
  
  // Controls
  controls = new PointerLockControls(camera, document.body);
  
  // Lights
  const ambientLight = new THREE.AmbientLight(0x0088ff, 0.5);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(50, 100, 50);
  scene.add(directionalLight);
  
  // Ground
  const groundGeometry = new THREE.PlaneGeometry(500, 500);
  const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x0a0a0a });
  const ground = new THREE.Mesh(groundGeometry, groundMaterial);
  ground.rotation.x = -Math.PI / 2;
  ground.receiveShadow = true;
  scene.add(ground);
  
  // Create labs
  createLabs();
  
  // Add neon lights
  for (let i = 0; i < 30; i++) {
    const x = (Math.random() - 0.5) * 400;
    const z = (Math.random() - 0.5) * 400;
    const light = new THREE.PointLight(
      Math.random() > 0.5 ? 0x00ffff : 0xff00ff,
      2,
      30
    );
    light.position.set(x, 10, z);
    scene.add(light);
  }
  
  // Click to lock pointer
  canvas.addEventListener('click', () => {
    controls.lock();
  });
  
  // Window resize
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
  
  // Movement
  const moveState = { forward: false, backward: false, left: false, right: false };
  const velocity = new THREE.Vector3();
  
  document.addEventListener('keydown', (e) => {
    if (e.code === 'KeyW') moveState.forward = true;
    if (e.code === 'KeyS') moveState.backward = true;
    if (e.code === 'KeyA') moveState.left = true;
    if (e.code === 'KeyD') moveState.right = true;
  });
  
  document.addEventListener('keyup', (e) => {
    if (e.code === 'KeyW') moveState.forward = false;
    if (e.code === 'KeyS') moveState.backward = false;
    if (e.code === 'KeyA') moveState.left = false;
    if (e.code === 'KeyD') moveState.right = false;
  });
  
  // Animation loop
  let prevTime = performance.now();
  
  function animate() {
    requestAnimationFrame(animate);
    
    const time = performance.now();
    const delta = (time - prevTime) / 1000;
    
    if (controls.isLocked) {
      velocity.x -= velocity.x * 10.0 * delta;
      velocity.z -= velocity.z * 10.0 * delta;
      
      const speed = 30;
      
      if (moveState.forward) velocity.z -= speed * delta;
      if (moveState.backward) velocity.z += speed * delta;
      if (moveState.left) velocity.x -= speed * delta;
      if (moveState.right) velocity.x += speed * delta;
      
      controls.moveRight(-velocity.x * delta);
      controls.moveForward(-velocity.z * delta);
    }
    
    prevTime = time;
    renderer.render(scene, camera);
  }
  
  animate();
  gameStarted = true;
  console.log('Game started!');
}

function createLabs() {
  const labs = [
    { name: 'Startup Hub', pos: [0, 0, 0], color: 0xff00ff, size: [60, 35, 70] },
    { name: 'Xenobiology', pos: [-60, 0, -80], color: 0x00ff88, size: [40, 25, 50] },
    { name: 'OTEC Energy', pos: [60, 0, -80], color: 0x0088ff, size: [40, 25, 50] },
    { name: 'Optogenetics', pos: [-60, 0, -20], color: 0xff0088, size: [40, 25, 50] },
    { name: 'Programmable Matter', pos: [60, 0, -20], color: 0x8800ff, size: [40, 25, 50] },
    { name: 'Wireless Power', pos: [-60, 0, 40], color: 0xffff00, size: [40, 25, 50] },
    { name: 'Mycelium Computing', pos: [60, 0, 40], color: 0x88ff00, size: [40, 25, 50] },
    { name: 'Cryogenics', pos: [-60, 0, 100], color: 0x00ffff, size: [40, 25, 50] },
    { name: 'Metamaterials', pos: [60, 0, 100], color: 0xff00ff, size: [40, 25, 50] },
    { name: 'Acoustic Levitation', pos: [-60, 0, 160], color: 0xff8800, size: [40, 25, 50] },
    { name: 'Epigenetics', pos: [60, 0, 160], color: 0x00ff00, size: [40, 25, 50] }
  ];
  
  labs.forEach(lab => {
    const geometry = new THREE.BoxGeometry(...lab.size);
    const material = new THREE.MeshStandardMaterial({ 
      color: 0x1a1a2e,
      emissive: lab.color,
      emissiveIntensity: 0.3
    });
    const building = new THREE.Mesh(geometry, material);
    building.position.set(lab.pos[0], lab.size[1] / 2, lab.pos[2]);
    building.castShadow = true;
    building.receiveShadow = true;
    scene.add(building);
    
    // Neon bars
    for (let i = 0; i < 4; i++) {
      const bar = new THREE.Mesh(
        new THREE.BoxGeometry(lab.size[0] * 0.8, 0.5, 0.5),
        new THREE.MeshStandardMaterial({ 
          color: lab.color,
          emissive: lab.color,
          emissiveIntensity: 1
        })
      );
      bar.position.set(lab.pos[0], 5 + i * 5, lab.pos[2] + lab.size[2] / 2 + 0.3);
      scene.add(bar);
    }
    
    // Door light
    const doorLight = new THREE.PointLight(lab.color, 3, 15);
    doorLight.position.set(lab.pos[0], 7, lab.pos[2] + lab.size[2] / 2 + 2);
    scene.add(doorLight);
  });
}

console.log('Script loaded successfully!');
</script>

</body>
</html>